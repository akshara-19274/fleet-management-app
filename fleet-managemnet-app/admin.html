<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div class="navbar">
        <h2>Admin Dashboard</h2>
        <select id="filtercategory">
            <option value="All">ALL</option>
            <option value="Auto">Auto</option>
            <option value="Car">Car</option>
            <option value="Truck">Truck</option>
            <option value="Bus">Bus</option>
        </select>
        <select id="fileravailability">
            <option value="All">ALL</option>
            <option value="Available">Available</option>
            <option value="Unavailable">Unavailable</option>
        </select>
        <button id="clearfilter" onclick="clearfilter()">Clear Filter</button>
    </div>
    <div class="layout">
        <aside class="sidebar">
            <h3>Add fleet</h3>
            <input type="text"id="regnumber" placeholder="Enter Registration Number"><br>
            <select id="category">
                <option value="Auto">Auto</option>
            <option value="Car">Car</option>
            <option value="Truck">Truck</option>
            <option value="Bus">Bus</option>
            </select><br>
            <input id="dname" type="text" placeholder="Enter Driver Name"><br>
            <select id="availability">
                <option value="available">Available</option>
                <option value="unavailable">Unavailable</option>
            </select><br>
            <button id="addfleet" onclick="addfleet()">Add Fleet</button>
        </aside>
    </div>
    <div id="container"></div>
</body>
<script>
    let fleetdata=[];
    function addfleet(){
        let regnumber=document.getElementById("regnumber").value;
        let category=document.getElementById("category").value;
        let drivername=document.getElementById("dname").value;
        let availability=document.getElementById("availability").value;
        let fleet={
            "rnumber":regnumber,
            "category":category,
            "dname":drivername,
            "availability":availability,
        };
        fleetdata.push(fleet)
        document.getElementById("regnumber").value="";
        document.getElementById("category").value="";
        document.getElementById("dname").value="";
        document.getElementById("availability").value="";
        showfleet();
    }
    function showfleet(){
        let container =document.getElementById("container");
        container.innerHTML="";
        let catFilter=document.getElementById("filtercategory").value;
        let availFilter=document.getElementById("fileravailability").value;
        let filtered=fleetdata.filter(f=>{
            return (catFilter=="All" || f.category==catFilter) && (availFilter=="All" || f.availability==availFilter);
        });
        filtered.forEach(f=>{
            let card=document.createElement("div");
            card.style.border="1px solid black";
            card.style.margin="10px";
            card.style.padding="10px";
            card.innerHTML=`
            <p>Registration Number: ${f.rnumber}</p>
            <p>Category: ${f.category}</p>
            <p>Driver Name: ${f.dname}</p>
            <p>Availability: ${f.availability}</p>
            <button onclick="updateDriver('${f.rnumber}')">Update Driver</button><br>
            <button onclick="changeAvailability('${f.rnumber}')">Change Availability</button><br>
            <button onclick="deleteFleet('${f.rnumber}')">Delete Fleet</button>
            `;
            container.appendChild(card);
        });
    }
    function updateDriver(id){
        let fleet=fleetdata.find(f=>f.rnumber==id);
        let newName=prompt("Enter new driver name",fleet.dname);
        if (newName){
            fleet.dname=newName;
            showfleet();
        } else {
            alert("Driver name update cancelled");
        }
    }
    function changeAvailability(id){
        let fleet=fleetdata.find(f=>f.rnumber==id);
        fleet.availability=fleet.availability=="Available"?"Unavailable":"Available";
        showfleet();
    }
    function deleteFleet(id){
        fleetdata=fleetdata.filter(f=>f.rnumber!=id);
        showfleet();
    }
    function clearfilter(){
        document.getElementById("filtercategory").value="All";
        document.getElementById("fileravailability").value="All";
        showfleet();
    }
</script>
</html>